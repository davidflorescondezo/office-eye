{"ast":null,"code":"import _objectSpread from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/davidflores/Documents/office-eye/web_app/src/account/Login.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport '../../styles/application.css';\nimport Input from './Input.js';\nimport _ from \"underscore\";\nimport { Redirect } from 'react-router-dom'; //import { SignUpLink } from './SignUp';\n\nimport { auth } from '../firebase/firebase';\nimport * as routes from '../router/routes';\nimport Button from 'material-ui/Button';\nimport { Link } from 'react-router-dom';\n/*\n    ***************************************************************************************\n    *    Reference\n    *    Title: Get Started with Firebase Authentication on Websites\n    *    Author: Firebase Documentation\n    *    Access Date: 2019\n    *    Availability: https://firebase.google.com/docs/auth/web/start\n    ***************************************************************************************\n*/\n//\n\nvar LogInPage = function LogInPage(_ref) {\n  var history = _ref.history;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }), React.createElement(Login, {\n    history: history,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }));\n};\n\nvar byPropKey = function byPropKey(propertyName, value) {\n  return function () {\n    return _defineProperty({}, propertyName, value);\n  };\n};\n\nvar INITIAL_STATE = {\n  email: '',\n  password: '',\n  error: null,\n  authUser: auth.currentUser //If the user has already signed in, the page will redirect him to dashboard.\n\n};\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n\n    _this.onSubmit = function (event) {\n      event.preventDefault();\n\n      var canProceed = _this.validateEmail(_this.state.email) && _this.refs.password.isValid();\n\n      if (canProceed) {\n        var _this$state = _this.state,\n            email = _this$state.email,\n            password = _this$state.password;\n        auth.signInWithEmailAndPassword(email, password).then(function () {\n          _this.setState(function () {\n            return _objectSpread({}, INITIAL_STATE);\n          });\n\n          _this.props.history.push(routes.HOME);\n        }).catch(function (error) {\n          _this.setState(byPropKey('error', error));\n        });\n      } else {\n        _this.refs.email.isValid();\n\n        _this.refs.password.isValid();\n      }\n    };\n\n    _this.validateEmail = function (event) {\n      var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return re.test(event);\n    };\n\n    _this.isEmpty = function (value) {\n      return !_.isEmpty(value);\n    };\n\n    _this.state = _objectSpread({}, INITIAL_STATE);\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      auth.onAuthStateChanged(function (authUser) {\n        authUser ? _this2.setState(function () {\n          return {\n            authUser: authUser\n          };\n        }) : _this2.setState(function () {\n          return {\n            authUser: null\n          };\n        });\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this3 = this;\n\n      auth.onAuthStateChanged(function (authUser) {\n        authUser ? _this3.setState(function () {\n          return {\n            authUser: authUser\n          };\n        }) : _this3.setState(function () {\n          return {\n            authUser: null\n          };\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state2 = this.state,\n          email = _this$state2.email,\n          password = _this$state2.password,\n          error = _this$state2.error;\n      var isInvalid = password === '' || email === '';\n      return this.state.authUser ? React.createElement(Redirect, {\n        to: routes.HOME,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        className: \"create_account_screen\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"create_account_form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(Input, {\n        text: \"Email Address\",\n        ref: \"email\",\n        type: \"text\",\n        defaultValue: this.state.email,\n        validate: this.validateEmail,\n        value: email,\n        onChange: function onChange(event) {\n          return _this4.setState(byPropKey('email', event.target.value));\n        },\n        errorMessage: \"Email is invalid\",\n        emptyMessage: \"Email can't be empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(Input, {\n        text: \"Password\",\n        ref: \"password\",\n        type: \"password\",\n        defaultValue: this.state.password,\n        validate: this.isEmpty,\n        value: password,\n        onChange: function onChange(event) {\n          return _this4.setState(byPropKey('password', event.target.value));\n        },\n        errorMessage: \"Error\",\n        emptyMessage: \"Password can't be empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"button button_wide\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"LOGIN\"), error && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, error.message))), React.createElement(\"a\", {\n        className: \"forgotPass\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: routes.PASSWORD_FORGET,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Forgot your password?\"))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default withRouter(LogInPage);\nexport { Login };","map":{"version":3,"sources":["/Users/davidflores/Documents/office-eye/web_app/src/account/Login.js"],"names":["React","Component","withRouter","Input","_","Redirect","auth","routes","Button","Link","LogInPage","history","byPropKey","propertyName","value","INITIAL_STATE","email","password","error","authUser","currentUser","Login","props","onSubmit","event","preventDefault","canProceed","validateEmail","state","refs","isValid","signInWithEmailAndPassword","then","setState","push","HOME","catch","re","test","isEmpty","onAuthStateChanged","isInvalid","target","message","PASSWORD_FORGET","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport '../../styles/application.css';\nimport Input from './Input.js';\nimport _ from \"underscore\";\nimport {Redirect} from 'react-router-dom';\n//import { SignUpLink } from './SignUp';\nimport { auth } from '../firebase/firebase';\nimport * as routes from '../router/routes';\nimport Button from 'material-ui/Button';\nimport { Link } from 'react-router-dom';\n\n/*\n    ***************************************************************************************\n    *    Reference\n    *    Title: Get Started with Firebase Authentication on Websites\n    *    Author: Firebase Documentation\n    *    Access Date: 2019\n    *    Availability: https://firebase.google.com/docs/auth/web/start\n    ***************************************************************************************\n*/\n//\nconst LogInPage = ({ history }) =>\n  <div>\n    <h3>\n    </h3>\n    <span>\n    </span>\n    <p>\n    </p>\n    <Login history={history} />\n  </div>\n\nconst byPropKey = (propertyName, value) => () => ({\n  [propertyName]: value,\n});\n\nconst INITIAL_STATE = {\n    email: '',\n    password: '',\n    error: null,\n    authUser: auth.currentUser,\n    //If the user has already signed in, the page will redirect him to dashboard.\n};\n\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { ...INITIAL_STATE };\n    }\n\n    componentDidMount(){\n        auth.onAuthStateChanged((authUser) => {\n            authUser\n                ? this.setState(() => ({ authUser }))\n                : this.setState(() => ({ authUser: null }));\n        })\n    }\n\n    componentWillMount() {\n        auth.onAuthStateChanged(authUser => {\n            authUser\n                ? this.setState(() => ({ authUser }))\n                : this.setState(() => ({ authUser: null }));\n        })\n    }\n\n    onSubmit = (event) => {\n        event.preventDefault();\n        var canProceed = this.validateEmail(this.state.email)\n            && this.refs.password.isValid();\n\n        if(canProceed) {\n            const {\n                email,\n                password,\n\n            } = this.state;\n\n\n            auth.signInWithEmailAndPassword(email, password)\n                .then(() => {\n                    this.setState(() => ({...INITIAL_STATE}));\n                    this.props.history.push(routes.HOME);\n                })\n                .catch(error => {\n                    this.setState(byPropKey('error', error));\n                });\n        }else {\n            this.refs.email.isValid();\n            this.refs.password.isValid();\n        }\n      }\n\n    validateEmail = (event) =>{\n        let re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(event);\n    };\n\n    isEmpty = (value) => {\n        return !_.isEmpty(value);\n    };\n\n    render () {\n\n\n        const {\n            email,\n            password,\n            error,\n          } = this.state;\n\n        const isInvalid =\n            password === '' ||\n            email === '';\n\n        return (\n            this.state.authUser\n                ? (<Redirect to={routes.HOME}/>)\n                    :(\n                    <div className=\"create_account_screen\">\n                     <div className=\"create_account_form\">\n                        <form onSubmit={this.onSubmit}>\n\n                        <Input\n                            text=\"Email Address\"\n                            ref=\"email\"\n                            type=\"text\"\n                            defaultValue={this.state.email}\n                            validate={this.validateEmail}\n                            value={email}\n                            onChange={event => this.setState(byPropKey('email', event.target.value))}\n                            errorMessage=\"Email is invalid\"\n                            emptyMessage=\"Email can't be empty\"\n                        />\n\n                        <Input\n                            text=\"Password\"\n                            ref=\"password\"\n                            type=\"password\"\n                            defaultValue={this.state.password}\n                            validate={this.isEmpty}\n                            value={password}\n                            onChange={event => this.setState(byPropKey('password', event.target.value))}\n                            errorMessage=\"Error\"\n                            emptyMessage=\"Password can't be empty\"\n                        />\n\n                            <button className=\"button button_wide\"\n                                    type=\"submit\">\n                                LOGIN\n                            </button>\n                        { error && <p>{error.message}</p> }\n                    </form>\n                </div>\n                <a className=\"forgotPass\"><Link to={routes.PASSWORD_FORGET}><p style={{textAlign: 'center'}}>Forgot your password?</p></Link></a>\n            </div>)\n        )\n    }\n}\nexport default withRouter(LogInPage);\n\nexport {\n    Login,\n  };"]},"metadata":{},"sourceType":"module"}