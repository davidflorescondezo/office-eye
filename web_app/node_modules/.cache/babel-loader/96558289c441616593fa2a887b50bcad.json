{"ast":null,"code":"import _objectSpread from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/davidflores/Documents/office-eye/web_app/src/account/SignUp.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport '../css/application.css';\nimport Input from './Input.js';\nimport _ from 'underscore';\nimport { Redirect } from 'react-router-dom'; //import '../../styles/application.css';\n\nimport { auth, database } from '../firebase/firebase';\nimport * as routes from '../router/routes';\nimport { Radio } from 'antd';\nimport { Link } from 'react-router-dom';\nvar RadioGroup = Radio.Group;\n/*\n    ***************************************************************************************\n    *    Reference\n    *    Title: Get Started with Firebase Authentication on Websites\n    *    Author: Firebase Documentation\n    *    Access Date: 2019\n    *    Availability: https://firebase.google.com/docs/auth/web/start\n    ***************************************************************************************\n*/\n\nvar byPropKey = function byPropKey(propertyName, value) {\n  return function () {\n    return _defineProperty({}, propertyName, value);\n  };\n};\n\nvar SignUpPage = function SignUpPage(_ref2) {\n  var history = _ref2.history;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }), React.createElement(SignUp, {\n    history: history,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }));\n};\n\nvar INITIAL_STATE = {\n  statesValue: null,\n  userName: '',\n  email: '',\n  role: 3,\n  password: '',\n  confirmPassword: '',\n  forbiddenWords: [\"password\"],\n  error: null,\n  authUser: auth.currentUser\n};\n\nvar SignUp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignUp, _Component);\n\n  function SignUp(props) {\n    var _this;\n\n    _classCallCheck(this, SignUp);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignUp).call(this, props));\n\n    _this.isConfirmedPassword = function (event) {\n      return event == _this.state.password;\n    };\n\n    _this.validateEmail = function (event) {\n      var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return re.test(event);\n    };\n\n    _this.validateUserName = function (event) {\n      if (event.length > 0 && event.length <= 20) return true;else return false;\n    };\n\n    _this.isEmpty = function (value) {\n      return !_.isEmpty(value);\n    };\n\n    _this.onSubmit = function (event) {\n      event.preventDefault();\n\n      var canProceed = _this.validateEmail(_this.state.email) && _this.refs.password.isValid() && _this.refs.passwordConfirm.isValid();\n\n      if (canProceed) {\n        var _this$state = _this.state,\n            userName = _this$state.userName,\n            email = _this$state.email,\n            password = _this$state.password,\n            role = _this$state.role;\n        var history = _this.props.history;\n        auth.createUserWithEmailAndPassword(email, password).then(function (authUser) {\n          database.ref('users/' + _this.state.authUser.uid).set({\n            username: userName,\n            email: email,\n            role: role\n          });\n\n          _this.setState(function () {\n            return _objectSpread({}, INITIAL_STATE);\n          });\n\n          history.push(routes.HOME);\n        }).catch(function (error) {\n          _this.setState(byPropKey('error', error));\n        });\n      } else {\n        _this.refs.email.isValid();\n\n        _this.refs.userName.isValid();\n\n        _this.refs.password.isValid();\n\n        _this.refs.passwordConfirm.isValid();\n      }\n    };\n\n    _this.state = _objectSpread({}, INITIAL_STATE);\n    return _this;\n  }\n\n  _createClass(SignUp, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      auth.onAuthStateChanged(function (authUser) {\n        authUser ? _this2.setState(function () {\n          return {\n            authUser: authUser\n          };\n        }) : _this2.setState(function () {\n          return {\n            authUser: null\n          };\n        });\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this3 = this;\n\n      auth.onAuthStateChanged(function (authUser) {\n        authUser ? _this3.setState(function () {\n          return {\n            authUser: authUser\n          };\n        }) : _this3.setState(function () {\n          return {\n            authUser: null\n          };\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state2 = this.state,\n          userName = _this$state2.userName,\n          email = _this$state2.email,\n          password = _this$state2.password,\n          confirmPassword = _this$state2.confirmPassword,\n          forbiddenWords = _this$state2.forbiddenWords,\n          error = _this$state2.error,\n          role = _this$state2.role;\n      /*const isInvalid =\n          password !== confirmPassword ||\n          password === '' ||\n          email === '' ||\n          userName === '';*/\n      //const Option = Select.Option;\n\n      return this.state.authUser ? React.createElement(Redirect, {\n        to: routes.HOME,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        className: \"create_account_screen\",\n        id: \"page_border\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"create_account_form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(Input, {\n        text: \"User Name\",\n        ref: \"userName\",\n        validate: this.validateUserName,\n        value: userName,\n        onChange: function onChange(event) {\n          return _this4.setState(byPropKey('userName', event.target.value));\n        },\n        type: \"text\",\n        errorMessage: \"User name max 20 characters\",\n        emptyMessage: \"User name can't be empty\",\n        style: {\n          borderBottomColor: 'black'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(Input, {\n        text: \"Email Address\",\n        ref: \"email\",\n        type: \"text\",\n        defaultValue: email,\n        validate: this.validateEmail,\n        value: email,\n        onChange: function onChange(event) {\n          return _this4.setState(byPropKey('email', event.target.value));\n        },\n        errorMessage: \"Email is invalid\",\n        emptyMessage: \"Email can't be empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }), React.createElement(Input, {\n        text: \"Password\",\n        type: \"password\",\n        ref: \"password\",\n        validator: \"true\",\n        minCharacters: \"8\",\n        requireCapitals: \"1\",\n        requireNumbers: \"1\",\n        forbiddenWords: forbiddenWords,\n        value: password,\n        emptyMessage: \"Password is invalid\",\n        onChange: function onChange(event) {\n          return _this4.setState(byPropKey('password', event.target.value));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }), React.createElement(Input, {\n        text: \"Confirm password\",\n        ref: \"passwordConfirm\",\n        type: \"password\",\n        validate: this.isConfirmedPassword,\n        value: confirmPassword,\n        onChange: function onChange(event) {\n          return _this4.setState(byPropKey('confirmPassword', event.target.value));\n        },\n        emptyMessage: \"Please confirm your password\",\n        errorMessage: \"Passwords don't match\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"button button_wide\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"CREATE ACCOUNT\"), error && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, error.message))));\n    }\n  }]);\n\n  return SignUp;\n}(Component);\n/*\n                        <RadioGroup style={{fontWeight:'bold'}}\n                                    defaultValue={1}\n                                    onChange={event => this.setState(byPropKey('role', event.target.value))}\n                                    value={role}>\n\n                            <Radio style={{fontSize:'15px'}} value={3}>Join as Student</Radio>\n                            <Radio style={{fontSize:'15px'}} value={2}>Join as Instructor</Radio>\n                            <Radio style={{fontSize:'15px'}} value={1}>Join as Lecturer</Radio>\n                        </RadioGroup>\n */\n\n/* Henry:\n                        <Select\n                        defaultValue=\"Choose a role\"\n                        >\n                            <Option value=\"disable\" disabled>You sign up as a</Option>\n                            <Option value=\"lectuer\">Lecturer</Option>\n                            <Option value=\"student\">Student</Option>\n                            <Option value=\"tutor\">Tutor</Option>\n                        </Select>\n */\n\n\nvar SignUpLink = function SignUpLink() {\n  return React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245\n    },\n    __self: this\n  }, \"Don't have an account?\", ' ', React.createElement(Link, {\n    to: routes.SIGN_UP,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }, \"Sign Up\"));\n};\n\nexport default withRouter(SignUpPage);\nexport { SignUp, SignUpLink };","map":{"version":3,"sources":["/Users/davidflores/Documents/office-eye/web_app/src/account/SignUp.js"],"names":["React","Component","withRouter","Input","_","Redirect","auth","database","routes","Radio","Link","RadioGroup","Group","byPropKey","propertyName","value","SignUpPage","history","INITIAL_STATE","statesValue","userName","email","role","password","confirmPassword","forbiddenWords","error","authUser","currentUser","SignUp","props","isConfirmedPassword","event","state","validateEmail","re","test","validateUserName","length","isEmpty","onSubmit","preventDefault","canProceed","refs","isValid","passwordConfirm","createUserWithEmailAndPassword","then","ref","uid","set","username","setState","push","HOME","catch","onAuthStateChanged","target","borderBottomColor","message","SignUpLink","SIGN_UP"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport '../css/application.css';\nimport Input from './Input.js';\nimport _ from 'underscore';\nimport {Redirect} from 'react-router-dom';\n//import '../../styles/application.css';\nimport { auth, database } from '../firebase/firebase';\nimport * as routes from '../router/routes';\nimport { Radio } from 'antd';\nimport { Link } from 'react-router-dom';\nconst RadioGroup = Radio.Group;\n\n/*\n    ***************************************************************************************\n    *    Reference\n    *    Title: Get Started with Firebase Authentication on Websites\n    *    Author: Firebase Documentation\n    *    Access Date: 2019\n    *    Availability: https://firebase.google.com/docs/auth/web/start\n    ***************************************************************************************\n*/\n\nconst byPropKey = (propertyName, value) => () => ({\n    [propertyName]: value,\n  });\n\nconst SignUpPage = ({ history }) =>\n  <div>\n    <h3>\n    </h3>\n    <span>\n    </span>\n    <p>\n    </p>\n    <SignUp history={history} />\n  </div>\n\nconst INITIAL_STATE = {\n    statesValue:null,\n    userName: '',\n    email: '',\n    role:3,\n    password: '',\n    confirmPassword: '',\n    forbiddenWords: [\"password\"],\n    error: null,\n    authUser: auth.currentUser,\n  };\n\nclass SignUp extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = { ...INITIAL_STATE };\n    }\n\n    componentDidMount(){\n        auth.onAuthStateChanged((authUser) => {\n            authUser\n                ? this.setState(() => ({ authUser }))\n                : this.setState(() => ({ authUser: null }));\n        })\n    }\n    componentWillMount() {\n        auth.onAuthStateChanged(authUser => {\n            authUser\n                ? this.setState(() => ({ authUser }))\n                : this.setState(() => ({ authUser: null }));\n        })\n    }\n\n    isConfirmedPassword = (event) =>{\n        return (event == this.state.password)\n    };\n\n    validateEmail = (event) =>{\n        let re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(event);\n    };\n    validateUserName = (event) =>{\n      if( event.length > 0 && event.length <= 20)\n        return true;\n      else return false;\n    };\n    isEmpty = (value) => {\n        return !_.isEmpty(value);\n    };\n\n   onSubmit = (event) => {\n       event.preventDefault();\n\n       var canProceed = this.validateEmail(this.state.email)\n           && this.refs.password.isValid()\n           && this.refs.passwordConfirm.isValid();\n\n       if(canProceed) {\n           const {\n               userName,\n               email,\n               password,\n               role,\n           } = this.state;\n\n           const {\n               history,\n           } = this.props;\n\n           auth.createUserWithEmailAndPassword(email, password)\n               .then(authUser => {\n                   database.ref('users/' + this.state.authUser.uid).set({\n                       username: userName,\n                       email: email,\n                       role: role,\n                   });\n                   this.setState(() => ({...INITIAL_STATE}));\n                   history.push(routes.HOME);\n               })\n               .catch(error => {\n                   this.setState(byPropKey('error', error));\n               });\n       }else {\n           this.refs.email.isValid();\n           this.refs.userName.isValid();\n           this.refs.password.isValid();\n           this.refs.passwordConfirm.isValid();\n       }\n    }\n\n    render () {\n        const {\n            userName,\n            email,\n            password,\n            confirmPassword,\n            forbiddenWords,\n            error,\n            role,\n        } = this.state;\n\n        /*const isInvalid =\n            password !== confirmPassword ||\n            password === '' ||\n            email === '' ||\n            userName === '';*/\n\n        //const Option = Select.Option;\n\n        return (\n            this.state.authUser\n                ? (<Redirect to={routes.HOME}/>)\n            : (<div className=\"create_account_screen\" id=\"page_border\">\n                <div className=\"create_account_form\">\n                    <form onSubmit={this.onSubmit}>\n\n\n\n                        <Input \n                            text=\"User Name\"\n                            ref=\"userName\"\n                            validate={this.validateUserName}\n                            value={userName}\n                            onChange={event => this.setState(byPropKey('userName', event.target.value))}\n                            type=\"text\"\n                            errorMessage=\"User name max 20 characters\"\n                            emptyMessage=\"User name can't be empty\"\n                            style={{borderBottomColor: 'black',}}\n                        />\n\n                        <Input\n                            text=\"Email Address\"\n                            ref=\"email\"\n                            type=\"text\"\n                            defaultValue={email}\n                            validate={this.validateEmail}\n                            value={email}\n                            onChange={event => this.setState(byPropKey('email', event.target.value))}\n                            errorMessage=\"Email is invalid\"\n                            emptyMessage=\"Email can't be empty\"\n                        />\n\n\n                        <Input\n                            text=\"Password\"\n                            type=\"password\"\n                            ref=\"password\"\n                            validator=\"true\"\n                            minCharacters=\"8\"\n                            requireCapitals=\"1\"\n                            requireNumbers=\"1\"\n                            forbiddenWords={forbiddenWords}\n                            value={password}\n                            emptyMessage=\"Password is invalid\"\n                            onChange={event => this.setState(byPropKey('password', event.target.value))}\n                        />\n\n                        <Input\n                            text=\"Confirm password\"\n                            ref=\"passwordConfirm\"\n                            type=\"password\"\n                            validate={this.isConfirmedPassword}\n                            value={confirmPassword}\n                            onChange={event => this.setState(byPropKey('confirmPassword', event.target.value))}\n                            emptyMessage=\"Please confirm your password\"\n                            errorMessage=\"Passwords don't match\"\n                        />\n\n\n                        <button className=\"button button_wide\"\n                            type=\"submit\">\n                            CREATE ACCOUNT\n                        </button>\n                        { error && <p>{error.message}</p> }\n                    </form>\n\n                </div>\n\n            </div>)\n\n        );\n    }\n}\n/*\n                        <RadioGroup style={{fontWeight:'bold'}}\n                                    defaultValue={1}\n                                    onChange={event => this.setState(byPropKey('role', event.target.value))}\n                                    value={role}>\n\n                            <Radio style={{fontSize:'15px'}} value={3}>Join as Student</Radio>\n                            <Radio style={{fontSize:'15px'}} value={2}>Join as Instructor</Radio>\n                            <Radio style={{fontSize:'15px'}} value={1}>Join as Lecturer</Radio>\n                        </RadioGroup>\n */\n/* Henry:\n                        <Select\n                        defaultValue=\"Choose a role\"\n                        >\n                            <Option value=\"disable\" disabled>You sign up as a</Option>\n                            <Option value=\"lectuer\">Lecturer</Option>\n                            <Option value=\"student\">Student</Option>\n                            <Option value=\"tutor\">Tutor</Option>\n                        </Select>\n */\nconst SignUpLink = () =>\n  <p>\n    Don't have an account?\n    {' '}\n    <Link to={routes.SIGN_UP}>Sign Up</Link>\n  </p>\n\nexport default withRouter(SignUpPage);\n\nexport {\n    SignUp,\n    SignUpLink,\n  };\n"]},"metadata":{},"sourceType":"module"}