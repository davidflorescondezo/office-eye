{"ast":null,"code":"import _classCallCheck from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/davidflores/Documents/office-eye/web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/davidflores/Documents/office-eye/web_app/src/pages/Dashboard.js\";\nimport React, { Component } from 'react'; //import Sidebar from '../components/layout/Sidebar.js';\n//import UpcomingList from '../components/UpcomingList.js';\n\nimport Headers from './layout/Header.js';\nimport '../css/Dashboard.css';\nimport { Layout, Menu, Icon, Button } from 'antd';\nimport { Link, Redirect, Route, Switch, Router } from 'react-router-dom';\nimport 'antd/dist/antd.css';\nimport * as routes from \"../router/routes\";\nimport { auth, database, storage } from '../firebase/firebase';\nimport Graph from \"../account/graph\";\nimport CircularProgressbar from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\nvar Sider = Layout.Sider,\n    Content = Layout.Content,\n    Header = Layout.Header;\n\nvar Dashboard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Dashboard, _Component);\n\n  function Dashboard(props) {\n    var _this2;\n\n    _classCallCheck(this, Dashboard);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(Dashboard).call(this, props));\n    _this2.state = {\n      thekey: _this2.props.key,\n      //authUser : auth.currentUser,\n      authUser: _this2.props.authUser,\n      selectedKey: '',\n      collapsed: false,\n      authUserDir: auth.currentUser,\n      graphRef: [],\n      employee: ''\n    };\n\n    if (_this2.state.authUserDir) {\n      _this2.userDir = database.ref('/users').child(_this2.state.authUserDir.uid);\n    } //this.enrolRef = database.ref('/users/'+ this.state.userDir + '/enrollment');\n\n\n    _this2.userRef = database.ref('/users').child('Anonymous');\n    return _this2;\n  }\n\n  _createClass(Dashboard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      auth.onAuthStateChanged(function (authUser) {\n        authUser ? _this3.setState(function () {\n          return {\n            authUser: authUser\n          };\n        }) : _this3.setState(function () {\n          return {\n            authUser: null\n          };\n        });\n\n        if (authUser) {\n          _this3.userRef = database.ref('users').child(authUser.uid);\n          /*this.enrolRef.on('value',(snapshot) => {\n              var judgeEnrollment = snapshot.numChildren();\n              this.setState({judgeEnrollment});\n           });*/\n\n          _this3.state.employee = authUser.email;\n        }\n      });\n\n      if (this.state.authUserDir === null) {}\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this4 = this;\n\n      auth.onAuthStateChanged(function (authUser) {\n        authUser ? _this4.setState(function () {\n          return {\n            authUser: authUser\n          };\n        }) : _this4.setState(function () {\n          return {\n            authUser: null\n          };\n        });\n      }); //graphRef\n\n      var _this = this; //if(this.state.authUserDir && (this.state.judgeEnrollment != 0)) {\n      //let postsRef1 = database.ref('/arduinoData').orderByValue().limitToLast(1);\n\n\n      var postsRef1 = database.ref('/arduinoData').orderByValue().limitToLast(1);\n      console.log(postsRef1);\n      /*postsRef1.once(\"value\", function(snapshot) {\n          snapshot.forEach(function(child) {\n            console.log(child.val().value);\n            _this.setState({graphRef: child.val().value});\n          });\n        });*/\n\n      postsRef1.on('value', function (snapshot) {\n        snapshot.forEach(function (child) {\n          console.log(child.val().value);\n          this.setState({\n            graphRef: child.val().value\n          });\n        }); //this.setState({graphRef: snapshot.val().value})\n      }); // }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var graphRef = this.state.graphRef;\n\n      if (graphRef) {\n        var graphList = Object.keys(graphRef).map(function (key, index) {\n          return graphRef[key];\n        });\n      } else var graphList = [];\n\n      var fullData = [{\n        employeeName: this.state.employee,\n        currentTime: graphList\n      }, {\n        employeeName: \"employeeNo2@gmail.com\",\n        currentTime: 20\n      }, {\n        employeeName: \"employeeNo3@gmail.com\",\n        currentTime: 5\n      }, {\n        employeeName: \"employeeNo4@gmail.com\",\n        currentTime: 40\n      }, {\n        employeeName: \"employeeNo5@gmail.com\",\n        currentTime: 70\n      }];\n\n      if (Math.floor(Math.floor(graphList / 60) / 60) == 0) {\n        var hoursLeft = 0;\n      } else var hoursLeft = 8 / Math.floor(Math.floor(graphList / 60) / 60) * 100;\n\n      var percentage = hoursLeft;\n      return this.state.authUser ? React.createElement(\"div\", {\n        className: \"boxContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(Headers, {\n        authUser: this.props.authUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"selfContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Current Employee Working Time \", React.createElement(\"span\", {\n        className: \"dateStyle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, Date())), React.createElement(\"div\", {\n        className: \"tableBStyle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"\\xA0\", React.createElement(Icon, {\n        type: \"clock-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), \"\\xA0Total hours spent working\")), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"\\xA0\", React.createElement(Icon, {\n        type: \"clock-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), \"\\xA0Total minutes spent working\")), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"\\xA0\", React.createElement(Icon, {\n        type: \"clock-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), \"\\xA0Total seconds spent working\"))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        className: \"tableStyle\",\n        width: \"35%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"\\xA0 \", Math.floor(Math.floor(graphList / 60) / 60)\n      /*HOURS*/\n      )), React.createElement(\"td\", {\n        className: \"tableStyle\",\n        width: \"35%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"\\xA0 \", Math.floor(graphList / 60)\n      /*MINUTES*/\n      )), React.createElement(\"td\", {\n        width: \"40%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"\\xA0 \", graphList\n      /*SECONDS*/\n      )), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        className: \"graphBg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        width: \"90%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(Graph, {\n        times: fullData,\n        graphTitle: \"Current Monitoring\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        width: \"10%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"circleGraph\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(CircularProgressbar, {\n        percentage: percentage,\n        text: \"\".concat(percentage, \"%\"),\n        styles: {\n          path: {\n            stroke: \"rgba(0, 153, 51, \".concat(percentage / 100, \")\")\n          },\n          text: {\n            fill: '#003300',\n            fontSize: '26px'\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }), \" \", React.createElement(\"div\", {\n        className: \"circleFont\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \" Hours left to finish work day \")))))))\n      /*<Layout>\n          <Route  render={(props) => (\n              <Sidebar {...props} /> )}/>\n           <Layout>\n               <Content\n                  style={{ background: '#fff', padding: '24px 24px 24px 35px', margin: 0, minHeight: 280 }}>\n                  <div>\n                      <Switch>\n                          <Route exact path={'/Dashboard'} component={UpcomingList} />\n                       </Switch>\n                  </div>\n              </Content>\n          </Layout>\n      </Layout>*/\n      : React.createElement(Redirect, {\n        to: routes.SIGN_IN,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Dashboard;\n}(Component);\n\nexport default Dashboard; //   <Sidebar grouplist={grouplist}/>\n// <Route exact path={'/Dashboard/forum/newPostDetail'} component={NewPostDetail}/>\n// <Route exact path={'/Dashboard/forum'} component={forum}/>\n// <Route exact path={'/Dashboard/forum/postDetail'} component={PostDetail}/>","map":{"version":3,"sources":["/Users/davidflores/Documents/office-eye/web_app/src/pages/Dashboard.js"],"names":["React","Component","Headers","Layout","Menu","Icon","Button","Link","Redirect","Route","Switch","Router","routes","auth","database","storage","Graph","CircularProgressbar","Sider","Content","Header","Dashboard","props","state","thekey","key","authUser","selectedKey","collapsed","authUserDir","currentUser","graphRef","employee","userDir","ref","child","uid","userRef","onAuthStateChanged","setState","email","_this","postsRef1","orderByValue","limitToLast","console","log","on","snapshot","forEach","val","value","graphList","Object","keys","map","index","fullData","employeeName","currentTime","Math","floor","hoursLeft","percentage","Date","path","stroke","text","fill","fontSize","SIGN_IN"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n//import Sidebar from '../components/layout/Sidebar.js';\n//import UpcomingList from '../components/UpcomingList.js';\nimport Headers from './layout/Header.js';\n\nimport '../css/Dashboard.css';\nimport { Layout, Menu, Icon, Button } from 'antd';\nimport {Link, Redirect, Route, Switch, Router} from 'react-router-dom';\nimport 'antd/dist/antd.css';\nimport * as routes from \"../router/routes\";\nimport {auth,database,storage} from '../firebase/firebase';\n\nimport Graph from \"../account/graph\"\nimport CircularProgressbar from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\n\nconst { Sider, Content, Header} = Layout;\nclass Dashboard extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            thekey : this.props.key,\n            //authUser : auth.currentUser,\n            authUser: this.props.authUser,\n            selectedKey: '',\n            collapsed: false,\n            authUserDir: auth.currentUser,\n            graphRef: [],\n            employee: '',\n        };\n        if(this.state.authUserDir){\n            this.userDir = database.ref('/users').child(this.state.authUserDir.uid);\n        }\n        //this.enrolRef = database.ref('/users/'+ this.state.userDir + '/enrollment');\n        this.userRef = database.ref('/users').child('Anonymous');\n    }\n\n    componentDidMount(){\n        auth.onAuthStateChanged((authUser) => {\n            authUser\n                ? this.setState(() => ({ authUser }))\n                : this.setState(() => ({ authUser: null }));\n            if (authUser) {\n                this.userRef = database.ref('users').child(authUser.uid);\n                /*this.enrolRef.on('value',(snapshot) => {\n                    var judgeEnrollment = snapshot.numChildren();\n                    this.setState({judgeEnrollment});\n\n                });*/\n                this.state.employee = authUser.email;\n            }\n        })\n\n        if (this.state.authUserDir === null){\n\n        }\n\n    }\n\n    componentWillMount() {\n        auth.onAuthStateChanged(authUser => {\n            authUser\n                ? this.setState(() => ({ authUser }))\n                : this.setState(() => ({ authUser: null }));\n        })\n\n        //graphRef\n        let _this = this;\n        //if(this.state.authUserDir && (this.state.judgeEnrollment != 0)) {\n            //let postsRef1 = database.ref('/arduinoData').orderByValue().limitToLast(1);\n            let postsRef1 = database.ref('/arduinoData').orderByValue().limitToLast(1);\n            console.log(postsRef1);\n\n            /*postsRef1.once(\"value\", function(snapshot) {\n                snapshot.forEach(function(child) {\n                  console.log(child.val().value);\n                  _this.setState({graphRef: child.val().value});\n                });\n              });*/\n\n            postsRef1.on('value', (snapshot) => {\n                snapshot.forEach(function(child) {\n                    console.log(child.val().value);\n                    this.setState({graphRef: child.val().value});\n                  });\n                //this.setState({graphRef: snapshot.val().value})\n            });\n       // }\n    }\n\n    render(){\n        let graphRef = this.state.graphRef;\n        if (graphRef){\n            var graphList = Object.keys(graphRef).map(function(key, index) {\n                return  graphRef[key]\n            });\n        }\n        else var graphList = [];\n\n        var fullData = [\n            {\n                employeeName: this.state.employee,\n                currentTime: graphList\n            },\n            {\n                employeeName: \"employeeNo2@gmail.com\",\n                currentTime: 20\n            },\n            {\n                employeeName: \"employeeNo3@gmail.com\",\n                currentTime: 5\n            },\n            {\n                employeeName: \"employeeNo4@gmail.com\",\n                currentTime: 40\n            },\n            {\n                employeeName: \"employeeNo5@gmail.com\",\n                currentTime: 70\n            }\n        ]\n\n        if((Math.floor((Math.floor((graphList)/60))/60)) == 0){\n            var hoursLeft = 0;\n        }\n        else \n            var hoursLeft = (8/(Math.floor((Math.floor((graphList)/60))/60)))*100;\n        \n        var percentage = hoursLeft\n\n        return(\n            this.state.authUser\n                ?(\n                    <div className=\"boxContainer\">\n                        <Headers authUser={this.props.authUser}/>\n                        <div className=\"selfContainer\">\n                        <h2>Current Employee Working Time <span className=\"dateStyle\">{Date()}</span></h2>\n                        <div className=\"tableBStyle\">\n                        <table>\n                            <tr>\n                                <th><h3>&nbsp;<Icon type=\"clock-circle\" />&nbsp;Total hours spent working</h3></th>\n                                <th><h3>&nbsp;<Icon type=\"clock-circle\" />&nbsp;Total minutes spent working</h3></th>\n                                <th><h3>&nbsp;<Icon type=\"clock-circle\" />&nbsp;Total seconds spent working</h3></th>\n                            </tr>\n                            <tr>\n                                <td className=\"tableStyle\" width=\"35%\"><h1>&nbsp; {Math.floor((Math.floor((graphList)/60))/60)/*HOURS*/}</h1></td>\n                                <td className=\"tableStyle\" width=\"35%\"><h1>&nbsp; {Math.floor((graphList)/60)/*MINUTES*/}</h1></td> \n                                <td width=\"40%\"><h1>&nbsp; {graphList/*SECONDS*/}</h1></td>\n                                <td></td>\n                            </tr>\n                        </table>\n                        </div>\n                    </div>\n                    <div className=\"graphBg\">\n                    <table>\n                        <tr>\n                            <td width=\"90%\">\n                                <Graph\n                                    times={fullData}\n                                    graphTitle=\"Current Monitoring\"\n                                />\n                            </td>\n                            <td width=\"10%\">\n                                <div className=\"circleGraph\">\n                                <CircularProgressbar\n                                    percentage={percentage}\n                                    text={`${percentage}%`}\n                                    styles={{\n                                        path: { stroke: `rgba(0, 153, 51, ${percentage / 100})` },\n                                        text: { fill: '#003300', fontSize: '26px' },\n                                    }}\n                                /> <div className=\"circleFont\"> Hours left to finish work day </div>\n                                </div>\n                            </td>\n                        </tr>\n                    </table>\n                    </div>\n                    </div>\n                    /*<Layout>\n                        <Route  render={(props) => (\n                            <Sidebar {...props} /> )}/>\n\n                        <Layout>\n\n                            <Content\n                                style={{ background: '#fff', padding: '24px 24px 24px 35px', margin: 0, minHeight: 280 }}>\n                                <div>\n                                    <Switch>\n                                        <Route exact path={'/Dashboard'} component={UpcomingList} />\n\n                                    </Switch>\n                                </div>\n                            </Content>\n                        </Layout>\n                    </Layout>*/)\n                : (<Redirect to={routes.SIGN_IN}/>)\n\n        )\n    }\n}\n\nexport default Dashboard;\n//   <Sidebar grouplist={grouplist}/>\n// <Route exact path={'/Dashboard/forum/newPostDetail'} component={NewPostDetail}/>\n// <Route exact path={'/Dashboard/forum'} component={forum}/>\n// <Route exact path={'/Dashboard/forum/postDetail'} component={PostDetail}/>\n"]},"metadata":{},"sourceType":"module"}